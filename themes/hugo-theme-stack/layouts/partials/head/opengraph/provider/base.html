{{- $title := partialCached "data/title" . .RelPermalink -}}
{{- $description := partialCached "data/description" . .RelPermalink -}}

<meta printf property='og:title' {{ "content=%q" $title | safeHTMLAttr }}>
<meta printf property='og:description' {{ "content=%q" $description | safeHTMLAttr }}>
<meta content='{{ .Permalink }}' property='og:url'>
<meta content='{{ .Site.Title }}' property='og:site_name'>
<meta content='
    {{- if .IsPage -}}
        article
    {{- else -}}
        website
    {{- end -}}
' property='og:type'>

{{- with .Params.locale -}}
<meta content='{{ . }}' property='og:locale'>
{{- end -}}

{{- if .IsPage -}}
<meta content='{{ .Section | title }}' property='article:section'/>
{{- range .Params.tags -}}
<meta content='{{ . }}' property='article:tag'/>
{{- end -}}
{{- end -}}

{{- if .IsPage -}}
{{- if not .Date.IsZero -}}
<meta content='{{ .Date.Format "2006-01-02T15:04:05-07:00" | safeHTML }}' property='article:published_time'/>
{{- end -}}
{{- if not .Lastmod.IsZero -}}
<meta content='{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" | safeHTML }}' property='article:modified_time'/>
{{- end -}}
{{- else -}}
{{- if not .Site.Lastmod.IsZero -}}
<meta content='{{ .Site.Lastmod.Format " 2006-01-02T15:04:05-07:00 " | safeHTML }}' property='og:updated_time'/>
{{- end -}}
{{- end -}}

{{ $image := partialCached "helper/image" (dict "Context" . "Type" "opengraph") .RelPermalink "opengraph" }}
{{- if $image.exists -}}
<meta content='{{ absURL $image.permalink }}' property='og:image'/>
{{- end -}}